# ___Разработка прототипа модуля для определения по данным ДЗЗ мест произрастания борщевика Сосновского___

## _Установка_
На сервере необходимо наличие установленного программного обеспечения SAGA GIS.

## _Описание алгоритма расчета по шагам_
__1__ Внешний сервис вызывает по HTTP метод `CreateFile` с параметром `fileInfo`. Этот метод, являющийся действием контроллера HttpPost. К параметру `fileInfo` относятся данные(идентификатор файла(id), имя файла, MIME-тип файла, последнее изменеие, идентификатор потока файла)  
__1.1__ Эти данные записываюся в БД MongoDb  
__1.2__ При записи этих данных в БД сгенерируется id  
__1.3__ dfgd  
__1.4__ Если метод валидации проверяет на правильность id, то возвращаются статус 200 и id. Иначе возвращаются 404 и сообщение об ошибке "Ошибка запроса при выборе файла. Идентификатор выбранного файла некорректный."  

__2__ Внешний сервис вызывает по HTTP метод `Upload` с параметром id. Этот метод, являющийся действием контроллера HttpPut. К параметру id относится идентификатор загрузки полученный при вызове `CreateFile`  
__2.1__ Если типом контента запроса не является MIME-тип файла `application/octet-stream`, то возвращаются статус 400 и какой-то тип контента запроса не подерживается  
__2.2__ Если метод валидации проверяет на неправильность id, то возвращаются возвращаются 400 и сообщение об ошибке "Ошибка запроса при загрузке файла. Полученный при вызове CreateFile идентификатор загрузки файла некорректный."  
__2.3__ Если не существует кэша с ключом file, то информация о выбранном файле придется читать из БД MongoDb  
__2.4__ Информация о файле проверяется пустой ли, тогда возвращаются статус 404 и сообщение об ошибке "Что-то пошло не так."  
__2.5__ Тело запроса сохранятся в БД MongoDb. Тело запроса может быть предназначен потоком файла  
__2.6__ При хранении потока файла сгенерируется идентификатор потока файла  
__2.7__ Возвращается статус 200  

[Вверх](#разработка-прототипа-модуля-для-определения-по-данным-ДЗЗ-мест-произрастания-борщевика-сосновского)